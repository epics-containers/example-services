services:

  bl01t-di-cam-01:

    extends:
      service: linux_ioc
      file: ../../include/ioc.yml

    # FOR DEV CONTAINERS developer version for use in the devcontainer
    # TODO work out how to parameterise this so we can merge the devcontainer
    # branch into main (I want runtime containers for main)
    image: ghcr.io/epics-containers/ioc-adsimdetector-developer:2025.3.5

    labels:
      version: 0.1.0

    ports:
      - 8080:8080/tcp

    environment:
      IOCSH_PS1: bl01t-di-cam-01 >
      IOC_NAME: bl01t-di-cam-01
      IOC_PREFIX: BL01T-DI-CAM-01

    volumes:
      - ../../opi/auto-generated/bl01t-di-cam-01:/epics/opi
      - ../../autosave/bl01t-di-cam-01:/autosave
      # FOR DEVCONTAINERS: mount in the parent of the project
      - ../../..:/workspaces

    configs:
      - source: bl01t-di-cam-01_config
        target: epics/ioc/config

configs:
  bl01t-di-cam-01_config:
    file: ./config

include:
  - path:
      ../../include/networks.yml

